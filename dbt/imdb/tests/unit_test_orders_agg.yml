unit_tests:
  - name: test_orders_agg # имя теста
    description: "тестовый тест) просто для демонстрации проверим, что cnt больше нуля" # описание
    model: orders_agg # имя тестируемой модели
    given: # что тест получает на взод, в разделе input описываются, как правило, источники модели - другие модели/сорсы и тд, их мб много
      - input: ref('orders_full')
        format: sql
        # фактические данные, которые тест получит на вход - имитируем, что пришлет сорс, правда есть куча багов - все алиасы переводятся 
        # в нижний регистр и ничего не работает в sql, а если юзать словарь/csv - то придется передавать все колонки, так как движок шлет в клик
        # запрос select cast(NULL as String) на те колонки, в которые не передал значения, а в клике так нельзя, короче не работает с кликом
        rows: | 
          select '1' as OrderID
    expect:
      rows:
        - {OrderID: '1', cnt: 1}